<!-- HTML: rakugaki.html 完全自動版 -->
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="robots" content="noindex, noarchive, nofollow, noimageindex">
  <link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic&family=Yusei+Magic&display=swap" rel="stylesheet">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>らくがき</title>
  <link rel="stylesheet" href="css/style.css">
  <script src="js/main.js" defer></script>
</head>
<body>
  <div class="wrapper">
    <a href="main.html"><img src="pic/logo.png" alt="ロゴ" class="site-logo"></a>
    <h1 class="text-center">らくがき</h1>

    <!-- 自動挿入用のギャラリーエリア -->
<div id="auto-gallery" class="notice-box">
  <h2 class="section-title">らくがき</h2>
  <!-- JavaScriptがここに内容を追加します -->
    <div id="gallery-container"></div>
  </div>
  
</div>

<footer class="back-home">
    <a href="main.html" class="home-button">🏠 ホームに戻る</a>
  </footer>
  <a href="rstop.html"><p>♥</p></a>

  <script>
  const GAS_ENDPOINT = "https://script.google.com/macros/s/AKfycbxoHPHWZFd2XNqa0A4Bg8kFBVE5P1UZSt25G5ZwiVpkAP7JE8WFPhqRYQAXG0YFB4myNg/exec";

  fetch(GAS_ENDPOINT)
    .then(response => response.json())
    .then(data => {
      const container = document.getElementById("gallery-container");

      const scrollBox = document.createElement("div");
      scrollBox.className = "comic-scroll";

      data.folders.forEach(group => {
        const card = document.createElement("div");
        card.className = "comic-card";
        card.setAttribute("data-images", JSON.stringify(group.images));
        card.setAttribute("data-title", group.title);

        const caption = document.createElement("div");
        caption.className = "comic-caption";
        caption.textContent = group.title;
        card.appendChild(caption);

        const img = document.createElement("img");
        img.src = group.images[0];
        img.className = "thumbnail";
        card.appendChild(img);

        scrollBox.appendChild(card);
      });

      container.appendChild(scrollBox);

      // 自動追加要素にイベントバインド（重要！）
      const newCards = container.querySelectorAll(".comic-card");
      newCards.forEach(card => {
        card.addEventListener("click", () => {
          const images = JSON.parse(card.getAttribute("data-images"));
          const title = card.getAttribute("data-title") || "";
          openSeries(images, title);
        });
      });
    });
</script>
<!-- Lightbox構造（新しい画像表示モーダル） -->
<div id="lightbox-viewer" class="lightbox-viewer">
  <div class="lightbox-overlay">
    <div class="lightbox-content">
      <!-- JavaScriptで画像やタイトルが挿入されます -->
    </div>
  </div>
</div>

</body>
</html>
